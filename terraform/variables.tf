
// Project: Terraform build of a Pentesting Infrastructure
// Author:  Daemonchild
// Purpose: Build an environment for running pentests

#    __ _ _____   _ _ __ ___ 
#   / _` |_  / | | | '__/ _ \
#  | (_| |/ /| |_| | | |  __/
#   \__,_/___|\__,_|_|  \___|   Version
   
                              
// variables.tf

variable "buildscripturl" {
  type        = string
  description = "Source for build scripts. See README for expected folder layout."
  sensitive = false
  nullable  = false
}

variable "project" {
  type        = string
  description = "Unique project name."
  validation {
    condition     = (length(var.project) <= 20 && length(var.project) > 2 && can(regex("[-\\w\\._\\(\\)]+", var.project)))
    error_message = "Project name may only contain alphanumeric characters, and underscores."
  }
  sensitive = false
  nullable  = false
}

variable "twooctets" {
  type        = string
  description = "IP subnet (first two octets only, eg 10.100)."
  sensitive   = false
  nullable    = false
}

variable "userexternalip" {
  type        = string
  description = "Your external IP for firewalls."
  sensitive   = false
  nullable    = false
}

variable "targetcidr" {
  type        = string
  description = "CIDR for target(s)."
  sensitive   = false
  nullable    = false
}


variable "dnsdomain" {
  type        = string
  description = "DNS Domain Name."
  sensitive   = false
  nullable    = false
}

variable "location" {
  type        = string
  description = "Azure location for hosting his project."
  sensitive   = false
  nullable    = false
  default     = "uksouth"
}


# VMs

variable "linuxsku" {
  type        = string
  description = "SKU for Utility VM"
  sensitive   = false
  nullable    = false
  default     = "Standard_D2s_v3" # 2 CPU, 8GB RAM
}

variable "kalisku" {
  type        = string
  description = "SKU for Kali VM"
  sensitive   = false
  nullable    = false
  default     = "Standard_D2s_v3" # 2 CPU, 8GB RAM
}

variable "dockersku" {
  type        = string
  description = "SKU for Docker VM"
  sensitive   = false
  nullable    = false
  default     = "Standard_D2_v3"
}

variable "linuximage" {
  type        = string
  description = "Linux base image"
  sensitive   = false
  nullable    = false
  default     = "Canonical:UbuntuServer:18.04-LTS:latest"
}

variable "kaliimage" {
  type        = string
  description = "Kali base image"
  sensitive   = false
  nullable    = false
  default     = "kali-linux:kali:kali-20231:2023.1.0"
}


variable "adminuser" {
  type        = string
  description = "Global Admin Username"
  sensitive   = false
  nullable    = false
  default     = "pentest"
}

#variable "adminsshkey" {
#
#  type        = string
#  description = "Global Admin SSH Key"
#  sensitive   = false
#  nullable    = false
#
#}

# The user shouldn't need to change anything below here

locals {
  resgrp = "rg-${lower(var.project)}"

  tags = {
    "project"     = "${var.project}",
  }


}

