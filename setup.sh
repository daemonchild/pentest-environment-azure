#!/bin/bash

# Project: Terraform build of a Pentesting Infrastructure
# Author:  Daemonchild
# Purpose: Build an environment for running pentests

#    __ _ _____   _ _ __ ___ 
#   / _` |_  / | | | '__/ _ \
#  | (_| |/ /| |_| | | |  __/
#   \__,_/___|\__,_|_|  \___|   Version
   
# Setup Script - Bash

# Login to your Azure account
az login

# Getting external IP
export userExternalIP = $(curl https://ifconfig.me)

# Only Unix mode CRLF for these resources
git config --global core.autocrlf false

# Get Container Resources Here


# Reset to Windows Mode
git config --global core.autocrlf true

# Setting list of domains available in this tenant for users
echo List of domain names:
az rest --method get --url https://graph.microsoft.com/v1.0/domains --query 'value[?id].id' -o tsv

# Need to agree kali T&Cs

az vm image terms accept --urn kali-linux:kali:kali-20231:2023.1.0








